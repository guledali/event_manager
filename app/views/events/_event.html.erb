<%#
  Event card partial

  Displays an event in a card format with image, date/time, location, capacity and description
  Used on index page to show multiple events

  @param event [Event] The event to display
%>
<div id="<%= dom_id event %>" class="card h-100 shadow-sm">
  <% if event.image.attached? %>
    <div class="card-img-top" style="height: 180px; overflow: hidden;">
      <%= image_tag event.image.variant(resize_to_fill: [400, 180]), class: "w-100 h-100 object-fit-cover" %>
    </div>
  <% else %>
    <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 180px;">
      <i class="bi bi-calendar-event text-secondary" style="font-size: 3rem;"></i>
    </div>
  <% end %>

  <div class="card-body">
    <h5 class="card-title text-primary mb-3"><%= event.name %></h5>

    <p class="card-text text-muted mb-2">
      <i class="bi bi-calendar"></i>
      <% if event.start_date.to_date == event.end_date.to_date %>
        <%= event.start_date.strftime("%B %d, %Y") %>
        (<%= event.start_date.strftime("%I:%M %p") %> - <%= event.end_date.strftime("%I:%M %p") %>)
      <% else %>
        <%= event.start_date.strftime("%b %d") %> - <%= event.end_date.strftime("%b %d, %Y") %>
      <% end %>
    </p>

    <p class="card-text text-muted mb-2">
      <i class="bi bi-geo-alt"></i> <%= event.location %>
    </p>

    <p class="card-text text-muted mb-3">
      <i class="bi bi-people"></i> Capacity: <%= event.capacity %>
    </p>

    <div class="card-text mb-3">
      <%= truncate(event.description, length: 100) %>
    </div>
  </div>

  <div class="card-footer bg-white border-top-0">
    <%= link_to "View Details", event, class: "btn btn-outline-primary btn-sm" %>
  </div>
</div>
